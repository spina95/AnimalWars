{"ast":null,"code":"var _jsxFileName = \"D:\\\\Universit\\xE0\\\\Applicazione_web_e_mobile\\\\AnimalWars\\\\app\\\\frontend\\\\src\\\\Pages\\\\Register\\\\Register.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Button, Form, Image, Card, Col } from 'react-bootstrap';\nimport { login } from '../../Utils/Authentication';\nimport ImageUploading from \"react-images-uploading\";\nimport API from \"../../Utils/API\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handlefirstname = event => {\n      this.setState({\n        firstname: event.target.value\n      });\n    };\n\n    this.handlelastname = event => {\n      this.setState({\n        lastname: event.target.value\n      });\n    };\n\n    this.handleEmailChange = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.handlePassword1 = event => {\n      this.setState({\n        password1: event.target.value\n      });\n    };\n\n    this.handlePassword2 = event => {\n      this.setState({\n        password2: event.target.value\n      });\n    };\n\n    this._handleImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      let file = e.target.files[0];\n\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.handleRegister = () => {\n      let formdata = new FormData();\n      formdata.append('first_name', this.state.firstname);\n      formdata.append('last_name', this.state.lastname);\n      formdata.append('email', this.state.email);\n      formdata.append('password1', this.state.password1);\n      formdata.append('password2', this.state.password2);\n      if (this.state.imagePreviewUrl) formdata.append('profilepicture', this.state.file, this.state.file.name);\n      API.register(this.state.firstname, this.state.lastname, this.state.email, this.state.password1, this.state.password2, this.state.imagePreviewUrl ? this.state.file : null).then(response => {\n        console.log(response);\n        localStorage.setItem(\"jwt\", response.key);\n        API.getUserData().then(data => {\n          login(response.key, data);\n          console.log(data.data);\n          this.props.history.push('/home');\n        });\n      }).catch(error => {}).catch(error => {});\n    };\n\n    this.state = {\n      firstname: \"\",\n      lastname: \"\",\n      email: \"\",\n      password1: \"\",\n      password2: \"\",\n      file: null,\n      imagePreviewUrl: ''\n    };\n  }\n\n  render() {\n    var imagePreview;\n    var imagePreviewUrl = this.state.imagePreviewUrl;\n\n    if (imagePreviewUrl) {\n      imagePreview = /*#__PURE__*/React.createElement(Image, {\n        src: imagePreviewUrl,\n        roundedCircle: true,\n        height: \"100px\",\n        width: \"100px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }\n      });\n    } else {\n      imagePreview = /*#__PURE__*/React.createElement(Image, {\n        src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSFr9oMl_MzaTa_7W8zPOhHCr42pVdiK4H8vvllcsG2WaMzJdG4&usqp=CAU\",\n        roundedCircle: true,\n        height: \"100px\",\n        width: \"100px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Login-App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"card-login z-depth-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formfirstname\",\n      onChange: this.handlefirstname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, \"First name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter first name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formlastname\",\n      onChange: this.handlelastname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"Last name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter last name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formBasicEmail\",\n      onChange: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"email\",\n      placeholder: \"Enter email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formpassword1\",\n      onChange: this.handlePassword1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Enter password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formpassword2\",\n      onChange: this.handlePassword2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, \"Repeat password\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Repeat password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"formImage\",\n      onChange: this._handleImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, imagePreview), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.File, {\n      id: \"custom-file\",\n      label: \"Image profile\",\n      custom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      type: \"button\",\n      style: {\n        width: \"100%\"\n      },\n      onClick: this.handleRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, \"Register\"))))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["D:/UniversitÃ /Applicazione_web_e_mobile/AnimalWars/app/frontend/src/Pages/Register/Register.js"],"names":["React","axios","Button","Form","Image","Card","Col","login","ImageUploading","API","Register","Component","constructor","props","handlefirstname","event","setState","firstname","target","value","handlelastname","lastname","handleEmailChange","email","handlePassword1","password1","handlePassword2","password2","_handleImageChange","e","preventDefault","reader","FileReader","file","files","onloadend","imagePreviewUrl","result","readAsDataURL","handleRegister","formdata","FormData","append","state","name","register","then","response","console","log","localStorage","setItem","key","getUserData","data","history","push","catch","error","render","imagePreview","width"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Button, Form, Image, Card, Col } from 'react-bootstrap';\r\nimport {login} from '../../Utils/Authentication'\r\nimport ImageUploading from \"react-images-uploading\";\r\nimport API from \"../../Utils/API\";\r\n\r\nclass Register extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        email: \"\", \r\n        password1: \"\",\r\n        password2: \"\",\r\n        file: null,\r\n        imagePreviewUrl: ''\r\n    };\r\n  }\r\n\r\n  handlefirstname = event => {this.setState({ firstname: event.target.value })}\r\n  handlelastname = event => {this.setState({ lastname: event.target.value })}\r\n  handleEmailChange = event => {this.setState({ email: event.target.value })}\r\n  handlePassword1 = event => {this.setState({ password1: event.target.value })}\r\n  handlePassword2 = event => {this.setState({ password2: event.target.value })}\r\n\r\n  _handleImageChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n\r\n    reader.onloadend = () => {\r\n      this.setState({\r\n        file: file,\r\n        imagePreviewUrl: reader.result\r\n      });\r\n    }\r\n\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  handleRegister = () => {\r\n    \r\n    let formdata = new FormData()\r\n    formdata.append('first_name', this.state.firstname)\r\n    formdata.append('last_name', this.state.lastname)\r\n    formdata.append('email', this.state.email)\r\n    formdata.append('password1', this.state.password1)\r\n    formdata.append('password2', this.state.password2)\r\n    if(this.state.imagePreviewUrl)\r\n      formdata.append('profilepicture', this.state.file, this.state.file.name);\r\n    API.register(this.state.firstname, this.state.lastname, this.state.email, this.state.password1, this.state.password2, this.state.imagePreviewUrl ? this.state.file : null).then(response => {\r\n        console.log(response)\r\n        localStorage.setItem(\"jwt\", response.key);\r\n      API.getUserData().then(data => {\r\n        login(response.key, data)\r\n        console.log(data.data)\r\n        this.props.history.push('/home');\r\n      })\r\n    }).catch(error => {\r\n    \r\n    }).catch(error => {\r\n\r\n    });\r\n  }\r\n    \r\n  render(){\r\n    var imagePreview\r\n    var imagePreviewUrl = this.state.imagePreviewUrl\r\n    if (imagePreviewUrl) {\r\n        imagePreview = (<Image src={imagePreviewUrl} roundedCircle height='100px' width='100px'/>);\r\n      } else {\r\n        imagePreview = (<Image src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSFr9oMl_MzaTa_7W8zPOhHCr42pVdiK4H8vvllcsG2WaMzJdG4&usqp=CAU\" \r\n        roundedCircle \r\n        height='100px'\r\n        width='100px'/>);\r\n    } \r\n    return (\r\n      <div className=\"Login-App\">\r\n        <Card className=\"card-login z-depth-5\">\r\n          <Card.Body>\r\n          <Form>\r\n              <Form.Group controlId=\"formfirstname\" onChange={this.handlefirstname}>\r\n                <Form.Label>First name</Form.Label>\r\n                <Form.Control placeholder=\"Enter first name\" />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formlastname\" onChange={this.handlelastname}>\r\n                <Form.Label>Last name</Form.Label>\r\n                <Form.Control placeholder=\"Enter last name\" />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formBasicEmail\" onChange={this.handleEmailChange}>\r\n                <Form.Label>Email address</Form.Label>\r\n                <Form.Control type=\"email\" placeholder=\"Enter email\" />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formpassword1\" onChange={this.handlePassword1}>\r\n                <Form.Label>Password</Form.Label>\r\n                <Form.Control placeholder=\"Enter password\" />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formpassword2\" onChange={this.handlePassword2}>\r\n                <Form.Label>Repeat password</Form.Label>\r\n                <Form.Control placeholder=\"Repeat password\" />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formImage\" onChange={this._handleImageChange}>\r\n                <Form.Row>\r\n                    <Col>\r\n                        {imagePreview}\r\n                    </Col>\r\n                    <Col>\r\n                        <Form.File \r\n                        id=\"custom-file\"\r\n                        label=\"Image profile\"\r\n                        custom\r\n                        />\r\n                    </Col>\r\n                </Form.Row>\r\n              </Form.Group>\r\n\r\n              <Form.Group>\r\n                <Button variant=\"primary\" type=\"button\" style={{width:\"100%\"}} onClick={this.handleRegister}>\r\n                  Register\r\n                </Button>\r\n              </Form.Group>\r\n\r\n            </Form>\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}