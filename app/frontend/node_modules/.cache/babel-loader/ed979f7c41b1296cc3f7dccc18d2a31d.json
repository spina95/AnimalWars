{"ast":null,"code":"var _jsxFileName = \"D:\\\\Universit\\xE0\\\\Applicazione_web_e_mobile\\\\AnimalWars\\\\app\\\\frontend\\\\src\\\\Pages\\\\Post\\\\Post.js\";\nimport React, { Fragment } from 'react';\nimport NavBar from '../../Components/Navbar';\nimport ImageUploading from \"react-images-uploading\";\nimport axios from 'axios';\nimport { Image, Form, Container, Button, Col } from 'react-bootstrap';\nimport APIService from '../../Utils/API';\nimport { currentUser } from '../../Utils/Authentication';\n\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n    this.url = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ8NDQ0NFREWFhURFRUYHSggGBolGxUVITEhJSkrOi46Fx8zODMtNyg5OisBCgoKDQ0NDg0NDisZFRktNzctLTcrNy03KzctLS0tLSstNzc3Ny0tNy03LTctLTc3LS0tLS03Ny0rLS0tKy03K//AABEIAJ8BPQMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIDBv/EABcQAQEBAQAAAAAAAAAAAAAAAAARAQL/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9xus7prOurK1KzSg3SsUoN0rFKDdKzUoN0rFEGqVkoNUrIDdKwUG6ViqDVKxVBqlZpQapWaUGqVmlBqlZqVRulYKDdSs0BqlZKDVKwoNZrWa541gL0xresaCCAKIAogCiCCiAKVAFEUAAAABUAFQBUAAAAogKIKKgACKAIoLjWM41gNdMa30xoM6AAAAAAAAAgAAAAKAAAAAAAAAIAAAAAAAAgAAKNY1jGN4DXTnrp0xoMhoAAAAAAgAAKAAAAAAAAAAAAACKgAAAACaqKACAAC43jGNYo30xrfTnoIAAAAAAAgAAoAAAAAAAAAAAAIAAAAACAAAAAAAuNYzig30xrfTGqICAoigAAAIAAKIoAAAAAAAAAIAAAAAIAqAAAAAAABjeMNYDfTGtdM6oyAAACiAKIoACAACiAKAAAACAqAAAAgAAAAACAKgAAAuNYxjeA10xrXTOqIAAAAAgKgCiAKIoAAAAAAAAAgAAAAgCAAAAgoqAAAguNYzjWA1rGt9MNAACKCAAAAAAAqAKAAAACAqAgAgKJVARUAABAAAAEAAAFxrGcawHTWNx13GdxoYhGoRBmEaiwGIRuEBiEahAZhGoQGYsWLAZg1CAyNQgMajXWJAQIQABBFIuCoNxIDI1EgMwaiQGSNQgMjUIIzCNQgJmNEWA//Z\";\n\n    this.onChange = image => {\n      // data for submit\n      console.log(image);\n      this.setState({\n        image: image[0]\n      });\n    };\n\n    this.handleTitleChange = event => {\n      this.setState({\n        title: event.target.value\n      });\n    };\n\n    this.handleTagChange = event => {\n      this.setState({\n        currentTag: event.target.value\n      });\n    };\n\n    this.state = {\n      image: null,\n      title: null,\n      currentTag: null,\n      tags: [],\n      isLoading: true\n    };\n  }\n\n  async componentDidMount() {}\n\n  uploadImage() {\n    return /*#__PURE__*/React.createElement(ImageUploading, {\n      onChange: this.onChange,\n      maxFileSize: 5,\n      acceptType: [\"jpg\", \"gif\", \"png\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }, ({\n      image,\n      onImageUpload,\n      onImageRemoveAll\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onImageUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, \"Upload image\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onImageRemoveAll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, \"Remove image\")));\n  }\n\n  insertTag() {\n    if (this.state.currentTag != \"\") {\n      var tags = this.state.tags;\n      tags.push(this.state.currentTag);\n      this.setState({\n        tags: tags\n      });\n    }\n\n    console.log(this.state.image);\n  }\n\n  removeTag(index) {\n    var tags = this.state.tags;\n    tags.splice(index, 1);\n    this.setState({\n      tags: tags\n    });\n  }\n\n  postImage() {\n    var user = currentUser();\n\n    if (this.state.image != null && this.state.title != \"\") {\n      APIService.postImage(this.state.image, this.state.title, user.id).then(response => {\n        console.log(response);\n\n        if (this.state.tags.length != 0) {\n          tagrequests = [];\n          this.state.tags.forEach(element => {\n            tagrequests.push(APIService.postTag(element, response.id));\n          });\n          axios.all(tagrequests).then(axios.spread((...responses) => {\n            this.props.history.push('/user');\n          }));\n        }\n      });\n    }\n  }\n\n  showImage() {\n    if (this.state.image != null) {\n      return /*#__PURE__*/React.createElement(Image, {\n        src: this.state.image.dataURL,\n        width: \"100%\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Image, {\n      src: this.url,\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 16\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App-home-page \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: \"App-home-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, this.showImage(), this.uploadImage(), /*#__PURE__*/React.createElement(Form, {\n      style: {\n        paddingTop: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      onChange: this.handleTitleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Insert tag\",\n      onChange: this.handleTagChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.insertTag(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 37\n      }\n    }, \"Insert\")))), this.state.tags.map((el, index) => {\n      return /*#__PURE__*/React.createElement(Form.Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 45\n        }\n      }, el)), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => this.removeTag(index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 45\n        }\n      }, \"Remove\"))));\n    }), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"success\",\n      style: {\n        width: \"100%\"\n      },\n      onClick: () => this.postImage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, \"Publish\")))))));\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["D:/Università/Applicazione_web_e_mobile/AnimalWars/app/frontend/src/Pages/Post/Post.js"],"names":["React","Fragment","NavBar","ImageUploading","axios","Image","Form","Container","Button","Col","APIService","currentUser","Post","Component","constructor","props","url","onChange","image","console","log","setState","handleTitleChange","event","title","target","value","handleTagChange","currentTag","state","tags","isLoading","componentDidMount","uploadImage","onImageUpload","onImageRemoveAll","insertTag","push","removeTag","index","splice","postImage","user","id","then","response","length","tagrequests","forEach","element","postTag","all","spread","responses","history","showImage","dataURL","render","display","alignItems","justifyContent","flexDirection","paddingTop","map","el","width"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport NavBar  from '../../Components/Navbar'\r\nimport ImageUploading from \"react-images-uploading\";\r\nimport axios from 'axios'\r\nimport {Image, Form, Container, Button, Col}  from 'react-bootstrap'\r\nimport APIService from '../../Utils/API';\r\nimport {currentUser} from '../../Utils/Authentication'\r\n\r\nclass Post extends React.Component {\r\n    \r\n    url = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ8NDQ0NFREWFhURFRUYHSggGBolGxUVITEhJSkrOi46Fx8zODMtNyg5OisBCgoKDQ0NDg0NDisZFRktNzctLTcrNy03KzctLS0tLSstNzc3Ny0tNy03LTctLTc3LS0tLS03Ny0rLS0tKy03K//AABEIAJ8BPQMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIDBv/EABcQAQEBAQAAAAAAAAAAAAAAAAARAQL/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9xus7prOurK1KzSg3SsUoN0rFKDdKzUoN0rFEGqVkoNUrIDdKwUG6ViqDVKxVBqlZpQapWaUGqVmlBqlZqVRulYKDdSs0BqlZKDVKwoNZrWa541gL0xresaCCAKIAogCiCCiAKVAFEUAAAABUAFQBUAAAAogKIKKgACKAIoLjWM41gNdMa30xoM6AAAAAAAAAgAAAAKAAAAAAAAAIAAAAAAAAgAAKNY1jGN4DXTnrp0xoMhoAAAAAAgAAKAAAAAAAAAAAAACKgAAAACaqKACAAC43jGNYo30xrfTnoIAAAAAAAgAAoAAAAAAAAAAAAIAAAAACAAAAAAAuNYzig30xrfTGqICAoigAAAIAAKIoAAAAAAAAAIAAAAAIAqAAAAAAABjeMNYDfTGtdM6oyAAACiAKIoACAACiAKAAAACAqAAAAgAAAAACAKgAAAuNYxjeA10xrXTOqIAAAAAgKgCiAKIoAAAAAAAAAgAAAAgCAAAAgoqAAAguNYzjWA1rGt9MNAACKCAAAAAAAqAKAAAACAqAgAgKJVARUAABAAAAEAAAFxrGcawHTWNx13GdxoYhGoRBmEaiwGIRuEBiEahAZhGoQGYsWLAZg1CAyNQgMajXWJAQIQABBFIuCoNxIDI1EgMwaiQGSNQgMjUIIzCNQgJmNEWA//Z\"\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            image: null,\r\n            title: null,\r\n            currentTag: null,\r\n            tags: [],\r\n            isLoading: true,\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n    }\r\n\r\n    onChange = (image) => {\r\n        // data for submit\r\n        console.log(image);\r\n        this.setState({\r\n            image: image[0]\r\n        })\r\n    };\r\n\r\n    uploadImage(){\r\n        return (\r\n            <ImageUploading\r\n                onChange={this.onChange}\r\n                maxFileSize={5}\r\n                acceptType={[\"jpg\", \"gif\", \"png\"]}\r\n            > \r\n            {({ image, onImageUpload, onImageRemoveAll }) => (\r\n            \r\n            <div>\r\n                <button onClick={onImageUpload}>Upload image</button>\r\n                <button onClick={onImageRemoveAll}>Remove image</button>\r\n            </div>\r\n            )}\r\n            </ImageUploading>\r\n        )\r\n    }\r\n\r\n    handleTitleChange = event => {this.setState({ title: event.target.value })}\r\n    handleTagChange = event => {this.setState({ currentTag: event.target.value })}\r\n\r\n    insertTag(){\r\n        if(this.state.currentTag != \"\"){\r\n            var tags = this.state.tags\r\n            tags.push(this.state.currentTag)\r\n            this.setState({\r\n                tags: tags\r\n            })\r\n        }\r\n        console.log(this.state.image)\r\n    }\r\n\r\n    removeTag(index){\r\n        var tags = this.state.tags\r\n        tags.splice(index,1);\r\n        this.setState({\r\n            tags: tags\r\n        })\r\n    }\r\n\r\n    postImage(){\r\n        var user = currentUser()\r\n        if(this.state.image != null && this.state.title != \"\"){\r\n            APIService.postImage(this.state.image, this.state.title, user.id).then((response) => {\r\n                console.log(response)\r\n                if(this.state.tags.length != 0){\r\n                    tagrequests = []\r\n                    this.state.tags.forEach(element => {\r\n                        tagrequests.push(APIService.postTag(element, response.id))\r\n                    })\r\n                    axios.all(tagrequests).then(axios.spread((...responses) => {\r\n                        this.props.history.push('/user');\r\n                    }))\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    showImage(){\r\n        if(this.state.image != null){\r\n            return (\r\n                <Image src={this.state.image.dataURL} width=\"100%\"/>\r\n            )\r\n        }\r\n        return <Image src={this.url} width=\"100%\"/>\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <Fragment>\r\n                <NavBar/>\r\n                <div className=\"App-home-page \">\r\n                <Container className=\"App-home-container\">\r\n                    <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection:'column'}}> \r\n                        {this.showImage()}\r\n                        {this.uploadImage()}\r\n                        <Form style={{paddingTop:\"20px\"}} >\r\n                            <Form.Group onChange={this.handleTitleChange} >\r\n                                <Form.Control placeholder=\"Title\" />\r\n                            </Form.Group>\r\n                            <Form.Group>\r\n                            <Form.Row>\r\n                                <Col>\r\n                                    <Form.Control placeholder=\"Insert tag\" onChange={this.handleTagChange} />\r\n                                </Col>\r\n                                <Col>\r\n                                    <Button onClick={() => this.insertTag()} >Insert</Button>\r\n                                </Col>\r\n                            </Form.Row>\r\n                            </Form.Group>\r\n                            {this.state.tags.map((el, index) => {\r\n                                return(\r\n                                    <Form.Group>\r\n                                    <Form.Row >\r\n                                        <Col>\r\n                                            <div>{el}</div>\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Button onClick={() => this.removeTag(index)} >Remove</Button>\r\n                                        </Col>\r\n                                    </Form.Row>\r\n                                    </Form.Group>\r\n                                )\r\n                            }\r\n                            )}\r\n                            <Form.Group>\r\n                                <Button variant=\"success\" style={{width:\"100%\"}} onClick={() => this.postImage()}>Publish</Button>\r\n                            </Form.Group>\r\n                        </Form>\r\n                    </div>\r\n                </Container>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\nexport default Post;"]},"metadata":{},"sourceType":"module"}