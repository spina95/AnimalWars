{"ast":null,"code":"import request from './Request';\nconst TOKEN_KEY = 'jwt';\nconst APIService = {\n  logout() {\n    // Logout\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/users/rest-auth/logout/',\n      method: 'POST',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  getUserData() {\n    // Return current user data\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/users/rest-auth/user/',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  getImageInfo(image_id) {\n    // Return user data of an image\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/image',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: {\n        image_id: image_id\n      }\n    });\n  },\n\n  getHighestScoreImages() {\n    // Return images with higher score\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/higherscore',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  getLowerScoreImages() {\n    // Return images with higher score\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/lowerscore',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  getnewestImages() {\n    // Return images with higher score\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/newestImages',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  getImageUser(user_id) {\n    // Return user data of an image\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/imageuser',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: {\n        user_id: user_id\n      }\n    });\n  },\n\n  getUserImages(user_id) {\n    // Return images of an user\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/profileimages',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: {\n        profile_id: user_id\n      }\n    });\n  },\n\n  searchTags(search, searchMode) {\n    // Search images with tags\n    const token = localStorage.getItem(TOKEN_KEY);\n    var list = search.split(' ');\n    list.pop();\n    console.log(list);\n    var params = new URLSearchParams();\n    var mode = searchMode == 0 ? \"descending\" : searchMode == 1 ? \"ascending\" : \"newest\";\n    params.append(\"order\", mode);\n    list.forEach(element => {\n      params.append(\"tag\", element);\n    });\n    return request({\n      url: '/images/searchTag',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: params\n    });\n  },\n\n  imageTags(image_id) {\n    // Return tags of an image\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/imageTags',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: {\n        image_id: image_id\n      }\n    });\n  },\n\n  randomImages() {\n    // Return two random images\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/randomImages',\n      method: 'GET',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      }\n    });\n  },\n\n  vote(winner_id, loser_id) {\n    // Return two random images\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/vote',\n      method: 'POST',\n      headers: {\n        \"Authorization\": 'Token ' + token\n      },\n      params: {\n        'winner_id': winner_id,\n        'loser_id': loser_id\n      }\n    });\n  },\n\n  postImage(image, title, user_id) {\n    // Post image\n    let fd = new FormData();\n    fd.append('image', image.file);\n    fd.append('name', title);\n    fd.append('user', user_id);\n    const token = localStorage.getItem(TOKEN_KEY);\n    return request({\n      url: '/images/imageupload',\n      method: 'POST',\n      headers: {\n        \"Authorization\": 'Token ' + token,\n        'Content-Type': 'multipart/form-data'\n      },\n      data: fd\n    });\n  },\n\n  postTag(tag, image_id) {\n    // Post tag\n    const token = localStorage.getItem(TOKEN_KEY);\n    let fd = new FormData();\n    fd.append('name', tag);\n    fd.append('image', image_id);\n    return request({\n      url: '/images/createTag',\n      method: 'POST',\n      headers: {\n        \"Authorization\": 'Token ' + token,\n        'Content-Type': 'multipart/form-data'\n      },\n      data: fd\n    });\n  }\n\n};\nexport default APIService;","map":{"version":3,"sources":["D:/Universit√†/Applicazione_web_e_mobile/AnimalWars/app/frontend/src/Utils/API.js"],"names":["request","TOKEN_KEY","APIService","logout","token","localStorage","getItem","url","method","headers","getUserData","getImageInfo","image_id","params","getHighestScoreImages","getLowerScoreImages","getnewestImages","getImageUser","user_id","getUserImages","profile_id","searchTags","search","searchMode","list","split","pop","console","log","URLSearchParams","mode","append","forEach","element","imageTags","randomImages","vote","winner_id","loser_id","postImage","image","title","fd","FormData","file","data","postTag","tag"],"mappings":"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","sourcesContent":["import request from './Request'\r\n\r\nconst TOKEN_KEY = 'jwt';\r\n\r\nconst APIService = {\r\n\r\n  logout() {\r\n    // Logout\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/users/rest-auth/logout/',\r\n      method: 'POST',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n    });\r\n  }, \r\n\r\n  getUserData() {\r\n    // Return current user data\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/users/rest-auth/user/',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token}\r\n    });\r\n  }, \r\n\r\n  getImageInfo(image_id) {\r\n    // Return user data of an image\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/image',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: {image_id: image_id},\r\n    });\r\n  }, \r\n\r\n  getHighestScoreImages() {\r\n    // Return images with higher score\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/higherscore',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token}\r\n    });\r\n  }, \r\n\r\n  getLowerScoreImages() {\r\n    // Return images with higher score\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/lowerscore',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token}\r\n    });\r\n  }, \r\n\r\n  getnewestImages() {\r\n    // Return images with higher score\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/newestImages',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token}\r\n    });\r\n  }, \r\n\r\n  getImageUser(user_id) {\r\n    // Return user data of an image\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/imageuser',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: {user_id: user_id},\r\n    });\r\n  }, \r\n\r\n  getUserImages(user_id) {\r\n    // Return images of an user\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/profileimages',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: {profile_id: user_id},\r\n    });\r\n  }, \r\n\r\n  searchTags(search, searchMode) {\r\n    // Search images with tags\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    var list = search.split(' ');\r\n    list.pop()\r\n    console.log(list)\r\n    var params = new URLSearchParams();\r\n    var mode = searchMode == 0 ? \"descending\" : searchMode == 1 ? \"ascending\" : \"newest\"\r\n    params.append(\"order\", mode)\r\n    list.forEach(element => {\r\n      params.append(\"tag\", element)\r\n    });\r\n    \r\n    return request({\r\n      url: '/images/searchTag',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: params\r\n    });\r\n  }, \r\n\r\n  imageTags(image_id) {\r\n    // Return tags of an image\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/imageTags',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: {image_id: image_id},\r\n    });\r\n  }, \r\n\r\n  randomImages() {\r\n    // Return two random images\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/randomImages',\r\n      method: 'GET',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n    });\r\n  }, \r\n\r\n  vote(winner_id, loser_id) {\r\n    // Return two random images\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/vote',\r\n      method: 'POST',\r\n      headers: {\"Authorization\": 'Token ' + token},\r\n      params: {'winner_id': winner_id, 'loser_id': loser_id}\r\n    });\r\n  }, \r\n\r\n  postImage(image, title, user_id) {\r\n    // Post image\r\n    let fd= new FormData()\r\n    fd.append('image', image.file)\r\n    fd.append('name', title)\r\n    fd.append('user', user_id)\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    return request({\r\n      url: '/images/imageupload',\r\n      method: 'POST',\r\n      headers: {\"Authorization\": 'Token ' + token, 'Content-Type': 'multipart/form-data',},\r\n      data: fd\r\n    });\r\n  }, \r\n\r\n  postTag(tag, image_id) {\r\n    // Post tag\r\n    const token = localStorage.getItem(TOKEN_KEY)\r\n    let fd= new FormData()\r\n    fd.append('name', tag)\r\n    fd.append('image', image_id)\r\n    return request({\r\n      url: '/images/createTag',\r\n      method: 'POST',\r\n      headers: {\"Authorization\": 'Token ' + token, 'Content-Type': 'multipart/form-data',},\r\n      data: fd\r\n    });\r\n  }, \r\n\r\n}\r\n\r\nexport default APIService;"]},"metadata":{},"sourceType":"module"}